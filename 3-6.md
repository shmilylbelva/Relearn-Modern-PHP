### 方法1 半同步复制
介于异步复制和同步复制之间，主库在执行完客户端提交的事务后不会立即返回给客户端，
而是至少要等到一个从库接收并写到redo log中，才会返回给客户端，相对于异步复制，半同步复制提高了数据的安全性

半同步复制原理
事务在主库写完binlog后，需要从库返回一个已接收，才能返回给客户端
确保事务提交后binlog至少传输到一个从库
不保证从库应用完这个事务的binlog
优点：利用数据库原生功能，比较简单
缺点：主库的写请求时延会增长，吞吐量会降低
### 方法2 数据库中间件
所有的读写请求都走数据库中间件，通常情况下写请求走主库，读请求走从库
记录所有路由到写库的key, 如果在主从同步的窗口内（假设500ms），有读请求过来了，
此时从库有可能还是旧的数据，就需要将key上的读请求路由到主库访问
在主从同步时间过完后，对应key的读请求继续路由到从库
优点：能保证绝对一致，
缺点：数据库中间件的成本较高
### 方法3 缓存记录写key法
写请求
如果key要发生写操作，记录到cache里，设置主从同步的缓存超时时间，比如500ms
然后修改主数据库
读请求
先到缓存里查，对应key有没有相关数据
如果有，说明缓存命中，这个key刚刚发生过写操作，此时需要将请求路由主库读取最新的数据
如果没有，说明缓存没有命中，说明这个key近期没有发生过写操作，此时将请求路由到从库，继续读写分离
优点：相对数据库中间件，成本较低
缺点：为了保证一致性，引入了cache组件，并且读写数据库时都多了缓存操作
